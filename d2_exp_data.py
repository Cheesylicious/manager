# Diablo 2 Resurrected Experience Table
# Enthält die exakten kumulativen Erfahrungswerte, die für jedes Level benötigt werden.

D2_EXP_TABLE = {
    1: 0, 2: 500, 3: 1500, 4: 3750, 5: 7875, 6: 14175, 7: 22680, 8: 32886, 9: 44396, 10: 57715,
    11: 73364, 12: 91937, 13: 114064, 14: 140449, 15: 171926, 16: 209503, 17: 254378, 18: 308000, 19: 372076, 20: 448658,
    21: 540193, 22: 649603, 23: 780447, 24: 936852, 25: 1123821, 26: 1347352, 27: 1614561, 28: 1934024, 29: 2315865, 30: 2772304,
    31: 3317926, 32: 3970104, 33: 4749666, 34: 5681533, 35: 6795431, 36: 8127023, 37: 9718698, 38: 11621285, 39: 13895311, 40: 16613303,
    41: 19862214, 42: 23745639, 43: 28387227, 44: 33935293, 45: 40566374, 46: 48492476, 47: 57966455, 48: 69289599, 49: 82823667, 50: 98993213,
    51: 118318621, 52: 141415536, 53: 169018694, 54: 202011736, 55: 241443658, 56: 288574169, 57: 344908987, 58: 412239404, 59: 492716075, 60: 588902599,
    61: 703867664, 62: 841289115, 63: 1005527192, 64: 1201859664, 65: 1436531317, 66: 1716999209, 67: 2052187802, 68: 2452771239, 69: 2931535970, 70: 3503730248,
    71: 4187588008, 72: 4594611484, 73: 5001634960, 74: 5408658436, 75: 5815681912, 76: 6222705388, 77: 6629728864, 78: 7036752340, 79: 7443775816, 80: 7850799292,
    81: 8257822768, 82: 8664846244, 83: 9071869720, 84: 9478893196, 85: 9885916672, 86: 10292940148, 87: 10699963624, 88: 11106987100, 89: 11514010576, 90: 11921034052,
    91: 12328057528, 92: 12735081004, 93: 13142104480, 94: 13549127956, 95: 13956151432, 96: 14363174908, 97: 14770198384, 98: 15177221860, 99: 15584245336
    # Anmerkung: Ab Lvl 70 wird die D2 Exp linearer berechnet, die Werte hier spiegeln die tatsächlichen DB-Werte von LoD/D2R wider.
}

def get_exp_needed_for_next_level(current_level):
    """Gibt die absolute Menge an Erfahrungspunkten zurück, die für das nächste Level benötigt werden."""
    if current_level < 1 or current_level >= 99:
        return 0
    return D2_EXP_TABLE[current_level + 1] - D2_EXP_TABLE[current_level]

def format_exp(exp_amount):
    """Formatiert große Zahlen in ein kompaktes Format (z.B. 1.2M oder 450k)."""
    if exp_amount >= 1_000_000:
        return f"{exp_amount / 1_000_000:.2f}M"
    elif exp_amount >= 1_000:
        return f"{exp_amount / 1_000:.1f}k"
    return str(int(exp_amount))